---
title: '[Week 15] Semifinals'
author: "Giuliano Sposito"
date: '2019-12-18'
displayInList: yes
displayInMenu: no
dropCap: yes
draft: no
resources:
- name: featuredImage
  params:
    description: Drew Brees TD Record
  src: drew_brees_td_record.jpg
slug: rank-week-15
tags:
- playoffs
- rank
- points
- wins and losses
categories:
- ranking
params:
  week: 15
editor_options: 
  chunk_output_type: console
---

Fantasy Super Bowl: *Sorocaba Steelers vs Indaiatuba Riders*

<!--more-->

## Championship

![Rank](/img/rank_week15_championship.jpg)

## Consolation

![Rank](/img/rank_week15_consolation.jpg)

## Week Trophies

![Trophies](/img/trophies_week15.jpg)

```{r setup, echo = FALSE, warning = FALSE, message = FALSE}
# put rnotbook in the same workdir
knitr::opts_knit$set(root.dir = normalizePath(rprojroot::find_rstudio_root_file())) 
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```

## Best League Players of Week

```{r bestTeamPlayers}

# libs
library(tidyverse)
library(ggimage)
library(knitr)
library(glue)
library(kableExtra)
  
# parameter
curr.week <- params$week

# so para pegar o time da liga do jogador
player.team <- readRDS(glue("./data/week{curr.week}_players_projections.rds")) %>% 
  select(id, nfl_id, fantasy.team)

# estatisticas do jogador
player.points <- readRDS("./data/players_points.rds") %>% 
  filter(week==curr.week)

# junta
players <- inner_join(player.team, player.points, by = c("id", "nfl_id")) %>% 
  select(-rosterSlots)  

buildTeam <- function(.players){
  # starters - slots unicos
  st01 <- tibble(
    pos=c("QB","RB","WR","TE","K","DEF"),
    qtd=c(1,2,2,1,1,1)
  ) %>% 
    split(1:nrow(.)) %>% 
    map_df(function(.x, .p){
      .p %>% 
        filter(position==.x$pos) %>%
        top_n(.x$qtd, points)
    }, .p=.players)
  
  # starters - slot versatil
  starters <- .players %>% 
    filter(position %in% c("WR","RB")) %>% 
    anti_join(st01, by = c("id", "nfl_id")) %>% 
    top_n(1, points) %>% 
    bind_rows(st01,.)
  
  ideal_team <- starters %>% 
    mutate(fullName = paste0(firstName, " ", lastName)) %>% 
    select(position, fullName, team, points, fantasy.team)
}

# filtra melhores players com time
players %>% 
  filter(fantasy.team!="*FreeAgent") %>% 
  buildTeam() %>% 
  kable()
  
```

## Best Free Agents of Week

```{r bestFAPlayers}

# filtra melhores players com time
players %>% 
  filter(fantasy.team=="*FreeAgent") %>% 
  buildTeam() %>% 
  kable()

```

## Twittersphere

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">5Ô∏è‚É£4Ô∏è‚É£0Ô∏è‚É£<a href="https://twitter.com/drewbrees?ref_src=twsrc%5Etfw">@drewbrees</a> is the all-time leader in passing touchdowns! üëè <a href="https://twitter.com/hashtag/Saints?src=hash&amp;ref_src=twsrc%5Etfw">#Saints</a><br> <br>üì∫: <a href="https://twitter.com/hashtag/INDvsNO?src=hash&amp;ref_src=twsrc%5Etfw">#INDvsNO</a> on ESPN<br>üì±: NFL app // Yahoo Sports app<br>Watch free on mobile: <a href="https://t.co/sWmUbeqQpz">https://t.co/sWmUbeqQpz</a> <a href="https://t.co/U04iyNHtRx">pic.twitter.com/U04iyNHtRx</a></p>&mdash; NFL (@NFL) <a href="https://twitter.com/NFL/status/1206772015757066240?ref_src=twsrc%5Etfw">December 17, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>



